<html>
<head>
   <title>News App</title>
   <!-- Bootstrap CSS -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
   
   <!-- Custom CSS -->
   <style>
       .news-image {
           height: 250px;
           width: 350px;
           object-fit: cover;
       }
       .description {
           display: -webkit-box;
           -webkit-line-clamp: 3;
           -webkit-box-orient: vertical;
           overflow: hidden;
       }
   </style>
</head>
<body>
   <div class="container mt-4">
       <h1 class="mb-4 text-center">FSP News Reader App</h1>

       <!-- Search Form -->
       <div class="row mb-4">
           <div class="col-md-8 mx-auto">
               <form action="" method="get" class="row g-3">
                   <!-- Category Dropdown -->
                   <div class="col-md-5">
                       <select name="category" class="form-select">
                           <option value="">All Categories</option>

                           <option value="science" {% if selected_category == 'science' %}selected{% endif %}>Science</option>
                           <option value="tech" {% if selected_category == 'tech' %}selected{% endif %}>Tech</option>
                           <option value="business" {% if selected_category == 'business' %}selected{% endif %}>Business</option>
                           <option value="sports" {% if selected_category == 'sports' %}selected{% endif %}>Sports</option>
                           <option value="entertainment" {% if selected_category == 'entertainment' %}selected{% endif %}>Entertainment</option>
                           <option value="general" {% if selected_category == 'general' %}selected{% endif %}>General</option>
                       </select>
                   </div>

                   <!-- Language Dropdown -->
                   <div class="col-md-5">
                       <select name="language" class="form-select">
                           <option value="">Any Languages</option>
                           
                           <option value="ar" {% if selected_language == 'ar' %}selected
                           {% endif %}>
                           Arabic</option>
                           
                           <option value="bg" {% if selected_language == 'bg' %}selected{% endif %}>
                            Bulgarian
                            </option>

                           <option value="bn" {% if selected_language == 'bn' %}selected{% endif %}>
                            Bengali
                            </option>
                           
                            <option value="cs" {% if selected_language == 'cs' %}selected{% endif %}>
                                Czech
                            </option>
                           
                            <option value="da" {% if selected_language == 'da' %}selected{% endif %}>
                                Danish
                            </option>
                           
                            <option value="de" {% if selected_language == 'de' %}selected{% endif %}>
                                German
                            </option>
                           
                            <option value="el" {% if selected_language == 'el' %}selected{% endif %}>Greek</option>
                           <option value="en" {% if selected_language == 'en' %}selected{% endif %}>English</option>
                           <option value="es" {% if selected_language == 'es' %}selected{% endif %}>Spanish</option>
                           <option value="et" {% if selected_language == 'et' %}selected{% endif %}>Estonian</option>
                           <option value="fa" {% if selected_language == 'fa' %}selected{% endif %}>Persian</option>
                           <option value="fi" {% if selected_language == 'fi' %}selected{% endif %}>Finnish</option>
                           <option value="fr" {% if selected_language == 'fr' %}selected{% endif %}>French</option>
                           <option value="he" {% if selected_language == 'he' %}selected{% endif %}>Hebrew</option>
                           <option value="hi" {% if selected_language == 'hi' %}selected{% endif %}>Hindi</option>
                           <option value="hr" {% if selected_language == 'hr' %}selected{% endif %}>Croatian</option>
                           <option value="hu" {% if selected_language == 'hu' %}selected{% endif %}>Hungarian</option>
                           <option value="id" {% if selected_language == 'id' %}selected{% endif %}>Indonesian</option>
                           <option value="it" {% if selected_language == 'it' %}selected{% endif %}>Italian</option>
                           <option value="ja" {% if selected_language == 'ja' %}selected{% endif %}>Japanese</option>
                           <option value="ko" {% if selected_language == 'ko' %}selected{% endif %}>Korean</option>
                           <option value="lt" {% if selected_language == 'lt' %}selected{% endif %}>Lithuanian</option>
                           <option value="nl" {% if selected_language == 'nl' %}selected{% endif %}>Dutch</option>
                           <option value="no" {% if selected_language == 'no' %}selected{% endif %}>Norwegian</option>
                           <option value="pl" {% if selected_language == 'pl' %}selected{% endif %}>Polish</option>
                           <option value="pt" {% if selected_language == 'pt' %}selected{% endif %}>Portuguese</option>
                           <option value="ro" {% if selected_language == 'ro' %}selected{% endif %}>Romanian</option>
                           <option value="ru" {% if selected_language == 'ru' %}selected{% endif %}>Russian</option>
                           <option value="sk" {% if selected_language == 'sk' %}selected{% endif %}>Slovak</option>
                           <option value="sv" {% if selected_language == 'sv' %}selected{% endif %}>Swedish</option>
                           <option value="ta" {% if selected_language == 'ta' %}selected{% endif %}>Tamil</option>
                           <option value="th" {% if selected_language == 'th' %}selected{% endif %}>Thai</option>
                           <option value="tr" {% if selected_language == 'tr' %}selected{% endif %}>Turkish</option>
                           <option value="uk" {% if selected_language == 'uk' %}selected{% endif %}>Ukrainian</option>
                           <option value="vi" {% if selected_language == 'vi' %}selected{% endif %}>Vietnamese</option>
                           <option value="zh" {% if selected_language == 'zh' %}selected{% endif %}>Chinese</option>
                       </select>
                   </div>

                   <!-- Filter Button -->
                   <div class="col-md-2">
                       <button type="submit" class="btn btn-primary w-100">Filter</button>
                   </div>
               </form>
           </div>
       </div>

       {% if error %}
           <div class="alert alert-danger">
               {{ error }}
           </div>
       {% endif %}


       {% for article in data %}
       <div class="card mb-3 shadow-sm">
           <div class="row g-0">


               <!-- Image of the news -->
               <div class="col-md-4">
                   {% if article.image_url %}
                       <img src="{{ article.image_url }}" 
                            class="news-image rounded-start" 
                            alt="{{ article.title }}">
                   {% endif %}
               </div>
               
               <div class="col-md-8">
                   <div class="card-body">
                       <!-- Title -->
                       <h5 class="card-title">{{ article.title }}</h5>
                       
                       <!-- Description -->
                       {% if article.description %}
                           <p class="card-text description text-muted">{{ article.description }}</p>
                       {% endif %}
                       
                       <!-- Source -->
                       <p class="card-text">
                           <small class="text-muted">Source: {{ article.source }}</small>
                       </p>
                       
                       <!-- Published at -->
                       <p class="card-text">
                           <small class="text-muted">
                               Published: {{ article.published_at|date:"F j, Y g:i A" }}
                           </small>
                       </p>

                       <!-- Language -->
                       <p class="card-text">
                           <small class="text-muted">Language: {{ article.language }}</small>
                       </p>

                       <!-- Categories -->
                       {% if article.categories %}
                       <p class="card-text">
                           <small class="text-muted">Categories: {{ article.categories|join:", " }}</small>
                       </p>
                       {% endif %}

                       <!-- Link to the full article -->
                       <a href="{{ article.url }}" 
                          class="btn btn-primary" 
                          target="_blank">Read full article</a>
                   </div>
               </div>
           </div>
       </div>
       {% endfor %}
   </div>

   <!-- Bootstrap JS -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>